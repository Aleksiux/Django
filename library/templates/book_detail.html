{% extends "base.html" %}

{% block content %}
 {% load static %}
<h1>{{ book.title }}</h1>

{% if book.cover %}
<img src="{{ book.cover.url }}" style="margin-bottom: 20px;" class="book-cover">
{% else %}
<img src="{% static 'media/covers/no-image.jpg' %}" style="margin-bottom: 20px;" class="book-cover">
{% endif %}
<p><strong>Author:</strong> <a href="{% url 'author' book.author.pk %}">{{ book.author }}</a></p>
<p><strong>Description:</strong> {{ book.description }}</p>
<p><strong>ISBN:</strong> {{ book.isbn }}</p>
<p><strong>Genre:</strong> {{ book.genre.all|join:", " }}</p>

<div style="margin-left:20px;margin-top:20px">
    <h4>Copy's:</h4>

    {% for copy in book.bookinstance_set.all %}
    <hr>
    <img class="rounded-circle" src="{{copy.reviewer.profile.photo.url}}">

    <p class="{% if copy.book_status == 'a' %}
      text-success
      {% elif copy.book_status == 'm' %}
      text-danger
      {% else %}text-warning{% endif %}">
        {{ copy.get_book_status_display }}
    </p>
    {% if copy.book_status != 'a' %}
    <p><strong>Will be returned:</strong> {{ copy.due_back }}</p>
    {% endif %}
    <p class="text-muted"><strong>Id:</strong> {{ copy.instance_id }}</p>
    {% endfor %}
</div>
{% endblock %}